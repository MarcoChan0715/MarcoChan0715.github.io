<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Apps Dashboard</title>

  <link rel="icon" type="image/png" href="icon.png?v=2">

  <link rel="stylesheet" href="Coursework.css" />
  
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <script src="https://kit.fontawesome.com/f65489be61.js" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* =========================================
       GLOBAL STYLES
       ========================================= */
    body { font-family: 'Poppins', sans-serif; }
    * { box-sizing: border-box; }

    /* Dashboard Layout */
    .app-container { max-width: 1100px; margin: 0 auto; padding-top: 160px; padding-bottom: 50px; }
    
    .app-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 30px; padding: 20px; justify-items: center;
        animation: fadeIn 0.5s ease;
    }

    .app-icon {
        width: 140px; height: 140px;
        background: white; border-radius: 28px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;
        border: 1px solid rgba(0,0,0,0.05); text-align: center; padding: 10px;
    }
    .app-icon:hover { transform: translateY(-5px); box-shadow: 0 15px 35px rgba(0,0,0,0.15); }
    .app-icon i { font-size: 40px; margin-bottom: 12px; }
    .app-name { font-weight: 600; font-size: 14px; color: #333; }
    
    /* Icon Colors */
    .icon-sub { color: #8b5cf6; background: linear-gradient(135deg, #f5f3ff, #ede9fe); }
    .icon-clock { color: #06b6d4; background: linear-gradient(135deg, #ecfeff, #cffafe); }
    .icon-weather { color: #f59e0b; background: linear-gradient(135deg, #fffbeb, #fef3c7); }
    .icon-food { color: #ec4899; background: linear-gradient(135deg, #fdf2f8, #fce7f3); } 
    .icon-bus { color: #ef4444; background: linear-gradient(135deg, #fef2f2, #fee2e2); } 
    .icon-qr { color: #1e293b; background: linear-gradient(135deg, #f8fafc, #f1f5f9); } 
    
    /* Dark Mode Overrides */
    body.dark-mode .app-icon { background: #1e293b; border-color: #334155; }
    body.dark-mode .app-name { color: #e2e8f0; }
    body.dark-mode .icon-sub { background: #2e1065; color: #a78bfa; }
    body.dark-mode .icon-clock { background: #083344; color: #22d3ee; }
    body.dark-mode .icon-weather { background: #451a03; color: #fbbf24; }
    body.dark-mode .icon-food { background: #831843; color: #f472b6; }
    body.dark-mode .icon-bus { background: #450a0a; color: #fca5a5; }
    body.dark-mode .icon-qr { background: #0f172a; color: #94a3b8; }

    /* Navigation */
    .app-view { display: none; animation: slideUp 0.3s ease-out; }
    .back-bar { padding: 10px 0 20px; position: relative; z-index: 100; }
    .back-btn {
        background: transparent; border: none; font-size: 16px; font-weight: 700; 
        color: #8b5cf6; cursor: pointer; display: flex; align-items: center; gap: 8px;
        transition: all 0.2s ease;
    }
    body.dark-mode .back-btn { color: #a78bfa; }
    .back-btn:hover { color: #6d28d9; transform: translateX(-5px); }

    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

    /* Global Vars */
    :root { --ink: #0f172a; --muted:#64748b; --card:#ffffff; --border:#e5e7eb; }
    body.dark-mode { --ink: #eef2ff; --muted: #94a3b8; --card: #1e293b; --border: #334155; }

    /* === PREMIUM BUTTON STYLES === */
    .action-btn {
        background: linear-gradient(135deg, #6366f1, #8b5cf6);
        color: white; border: none; padding: 12px 24px;
        border-radius: 12px; font-weight: 600; cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 4px 6px rgba(99, 102, 241, 0.2); font-size: 14px;
    }
    .action-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 15px rgba(99, 102, 241, 0.3); filter: brightness(1.1); }
    .action-btn:active { transform: translateY(0); }

    .secondary-btn {
        background: #f1f5f9; color: #64748b; border: 1px solid #e2e8f0;
        padding: 12px 24px; border-radius: 12px; font-weight: 600; cursor: pointer;
        transition: all 0.2s; font-size: 14px;
    }
    .secondary-btn:hover { background: #e2e8f0; color: #334155; transform: translateY(-1px); }
    body.dark-mode .secondary-btn { background: #334155; color: #cbd5e1; border-color: #475569; }
    body.dark-mode .secondary-btn:hover { background: #475569; }

    .fx-btn {
        background: linear-gradient(135deg, #10b981, #059669);
        color: white; border: none; padding: 12px;
        border-radius: 12px; font-weight: 600; cursor: pointer;
        width: 100%; margin-top: 15px; font-size: 14px;
        transition: all 0.3s ease; box-shadow: 0 4px 10px rgba(16, 185, 129, 0.2);
        display: flex; align-items: center; justify-content: center; gap: 8px;
    }
    .fx-btn:hover { transform: scale(1.02); box-shadow: 0 6px 15px rgba(16, 185, 129, 0.3); }

    /* === QR APP & DROP ZONE STYLES === */
    .qr-container { background: var(--card); border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); padding: 40px; max-width: 600px; margin: 0 auto; text-align: center; border: 1px solid var(--border); }
    body.dark-mode .qr-container { background: #1e293b; }
    
    .qr-box { 
        background: white; padding: 20px; border-radius: 16px; 
        margin: 20px auto; width: 220px; height: 220px; 
        display: flex; align-items: center; justify-content: center;
        box-shadow: 0 5px 25px rgba(0,0,0,0.05); border: 1px solid #eee;
    }

    .drop-zone {
        width: 100%; height: 180px; padding: 25px;
        display: flex; align-items: center; justify-content: center; text-align: center;
        border: 2px dashed #cbd5e1; border-radius: 16px;
        cursor: pointer; color: #64748b; background: rgba(0,0,0,0.02);
        transition: all 0.2s ease; margin-top: 20px;
    }
    .drop-zone:hover, .drop-zone--over { border-color: #6366f1; background: rgba(99, 102, 241, 0.05); }
    .drop-zone i { font-size: 40px; margin-bottom: 10px; color: #94a3b8; }
    .drop-zone p { font-size: 14px; font-weight: 600; margin: 0; }
    .drop-zone small { font-size: 11px; opacity: 0.7; }

    /* === FOOD MAP STYLES === */
    .food-container { 
        background: var(--card); border-radius: 20px; 
        box-shadow: 0 10px 40px rgba(0,0,0,0.1); padding: 30px; 
        max-width: 900px; margin: 0 auto; text-align: center; 
        border: 1px solid var(--border);
    }
    body.dark-mode .food-container { background: #1e293b; }
    #foodMap { height: 400px; width: 100%; border-radius: 16px; margin-top: 20px; z-index: 1; border: 1px solid var(--border); }
    .food-input-group { display: flex; gap: 10px; margin-top: 10px; }
    .food-input { flex: 1; padding: 12px; border-radius: 12px; border: 1px solid var(--border); background: rgba(0,0,0,0.03); color: var(--ink); outline: none; }
    .food-tags { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; margin-top: 25px; margin-bottom: 15px; }
    .food-tag { 
        background: rgba(236, 72, 153, 0.1); color: #ec4899; 
        padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; 
        cursor: pointer; border: 1px solid rgba(236, 72, 153, 0.2); transition: all 0.2s;
    }
    .food-tag:hover { background: #ec4899; color: white; }
    .rest-card {
        background: var(--card); border: 1px solid var(--border);
        border-radius: 16px; padding: 20px; margin-top: 20px;
        text-align: left; animation: slideUp 0.3s ease;
        display: none; box-shadow: 0 5px 20px rgba(0,0,0,0.05);
    }
    .rest-title { font-size: 20px; font-weight: 700; color: var(--ink); margin-bottom: 5px; }
    .rest-meta { color: var(--muted); font-size: 13px; margin-bottom: 15px; }
    .rest-details { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px; }
    .rest-detail-item { font-size: 13px; color: var(--ink); }
    .rest-label { font-weight: 600; color: #ec4899; display: block; margin-bottom: 3px; }
    .review-link-btn {
        background: #ec4899; color: white; text-decoration: none; display: block;
        text-align: center; padding: 10px; border-radius: 10px; font-weight: 600;
        transition: transform 0.2s;
    }
    .review-link-btn:hover { transform: translateY(-2px); opacity: 0.9; }

    /* === BACK TO TOP BUTTON === */
    .back-to-top {
        position: fixed; bottom: 30px; right: 30px;
        width: 50px; height: 50px; border-radius: 50%;
        background: linear-gradient(135deg, #6366f1, #8b5cf6);
        color: white; border: none; font-size: 18px;
        cursor: pointer; box-shadow: 0 10px 25px rgba(99, 102, 241, 0.4);
        display: none; align-items: center; justify-content: center;
        transition: all 0.3s ease; z-index: 200;
    }
    .back-to-top:hover { transform: translateY(-5px); box-shadow: 0 15px 35px rgba(99, 102, 241, 0.5); }

    /* Stopwatch Buttons */
    .sw-controls { display: flex; justify-content: center; gap: 15px; margin-top: 15px; }
    .sw-btn {
        padding: 10px 24px; border: none; border-radius: 12px;
        font-weight: 700; font-size: 14px; cursor: pointer;
        text-transform: uppercase; letter-spacing: 0.5px;
        transition: all 0.1s; box-shadow: 0 4px 0 rgba(0,0,0,0.1); position: relative; top: 0;
    }
    .sw-btn:active { top: 4px; box-shadow: none; }
    .btn-sw-stop { background: #fee2e2; color: #ef4444; border: 1px solid #fecaca; }
    .btn-sw-stop:hover { background: #fecaca; }
    .btn-sw-start { background: #dcfce7; color: #16a34a; border: 1px solid #bbf7d0; }
    .btn-sw-start:hover { background: #bbf7d0; }
    .btn-sw-reset { background: #f1f5f9; color: #64748b; border: 1px solid #e2e8f0; }
    .btn-sw-reset:hover { background: #e2e8f0; }

    /* === SUBSCRIPTION MANAGER === */
    #sm { box-sizing: border-box; width: 100%; padding: 24px 16px 56px; background: rgba(255, 255, 255, 0.95); border-radius: 16px; position: relative; }
    body.dark-mode #sm { background: rgba(30, 30, 40, 0.95); }
    #sm h1 { margin: 0 0 5px; font-size: 26px; font-weight:700; color: var(--ink); }
    #sm .sm-top { display:flex; justify-content:space-between; align-items: flex-start; margin-bottom: 25px; border-bottom: 1px solid var(--border); padding-bottom: 15px; }
    #sm .sm-group { display:flex; gap:10px; align-items:center; }
    #sm .sm-card { background: var(--card); border:1px solid var(--border); border-radius:16px; padding:16px; margin-bottom: 25px; box-shadow:0 8px 18px rgba(0,0,0,0.06); }
    #sm .sm-input, #sm .sm-select { background: var(--card); color: var(--ink); border:1px solid var(--border); border-radius:12px; padding:10px 12px; font-size:14px; outline:none; min-height:40px; width: 100%; box-sizing: border-box; }
    #sm .sm-row { display:grid; grid-template-columns: repeat(12, 1fr); gap:10px; margin-top: 10px; }
    #sm .col-6 { grid-column: span 6; } #sm .col-3 { grid-column: span 3; } #sm .col-12 { grid-column: span 12; }
    #sm .fx-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap:8px; margin-bottom: 10px; }
    .fx-item { background: rgba(0,0,0,0.03); padding: 8px 5px; border-radius: 8px; text-align: center; font-size: 13px; color: var(--ink); }
    body.dark-mode .fx-item { background: rgba(255,255,255,0.05); }

    /* Modal Styling */
    .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); z-index: 10000; display: none; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
    .modal-box { background: var(--card); padding: 30px; border-radius: 20px; width: 90%; max-width: 500px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); border: 1px solid var(--border); animation: popUp 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
    @keyframes popUp { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }

    /* === CLOCK & POMODORO === */
    .clock-container { text-align: center; background: rgba(255,255,255,0.95); padding: 40px; border-radius: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); max-width: 500px; margin: 0 auto; }
    body.dark-mode .clock-container { background: #1e293b; }
    .digital-time { font-size: 70px; font-weight: 800; line-height: 1; color: var(--ink); }
    .pomo-box { background: #fff0f3; border-radius: 30px; padding: 30px; margin: 20px 0; }
    body.dark-mode .pomo-box { background: #2d1b20; }
    .pomo-timer { font-size: 80px; font-weight: 800; color: #ff4d6d; line-height: 1; margin: 20px 0; }
    .mode-buttons { display: inline-flex; background: rgba(0,0,0,0.05); padding: 5px; border-radius: 50px; gap: 5px; }
    .mode-btn { border: none; background: transparent; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-weight: 600; color: var(--muted); }
    .mode-btn.active { background: white; color: #ff4d6d; shadow: 0 2px 5px rgba(0,0,0,0.1); }
    body.dark-mode .mode-btn.active { background: #4a2c33; }
    .pomo-controls { display: flex; justify-content: center; align-items: center; gap: 15px; margin-top: 10px; }
    .control-btn { border: none; cursor: pointer; font-weight: 700; transition: transform 0.2s; display: flex; align-items: center; justify-content: center; }
    .btn-start { background: #ff4d6d; color: white; padding: 15px 40px; border-radius: 50px; font-size: 18px; box-shadow: 0 10px 20px rgba(255, 77, 109, 0.3); }
    .btn-reset { width: 50px; height: 50px; border-radius: 50%; background: rgba(0,0,0,0.05); color: var(--muted); font-size: 18px; }
    .btn-reset:hover { background: rgba(0,0,0,0.1); color: var(--ink); }

    /* Weather Styles */
    .weather-container { background: rgba(255, 255, 255, 0.95); border-radius: 30px; padding: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); max-width: 1000px; margin: 0 auto; overflow: visible; position: relative; }
    body.dark-mode .weather-container { background: #1e293b; color: white; }
    .search-wrapper { position: relative; max-width: 500px; margin: 0 auto 30px; }
    .search-box { display: flex; gap: 10px; }
    .weather-input { flex: 1; padding: 12px 20px; border-radius: 50px; border: 1px solid var(--border); background: var(--card); color: var(--ink); font-size: 16px; outline: none; }
    .weather-btn { padding: 12px 20px; border-radius: 50px; border: none; background: #f59e0b; color: white; font-weight: bold; cursor: pointer; transition: transform 0.2s; }
    .weather-btn:hover { transform: scale(1.05); }
    .suggestions-list { position: absolute; top: 100%; left: 0; right: 0; background: var(--card); border: 1px solid var(--border); border-radius: 12px; margin-top: 5px; max-height: 200px; overflow-y: auto; box-shadow: 0 10px 30px rgba(0,0,0,0.1); z-index: 100; display: none; }
    .suggestion-item { padding: 10px 15px; cursor: pointer; text-align: left; font-size: 14px; border-bottom: 1px solid rgba(0,0,0,0.05); color: var(--ink); }
    .suggestion-item:hover { background: rgba(0,0,0,0.03); }
    .weather-content-grid { display: grid; grid-template-columns: 1fr 1.5fr; gap: 40px; align-items: start; margin-top: 20px; animation: fadeIn 0.5s; display: none; }
    @media (max-width: 768px) { .weather-content-grid { grid-template-columns: 1fr; } }
    .current-weather-card { text-align: center; padding: 30px; background: rgba(245, 158, 11, 0.05); border-radius: 24px; border: 1px solid rgba(245, 158, 11, 0.1); }
    .weather-icon { font-size: 100px; color: #f59e0b; margin-bottom: 15px; }
    .weather-temp { font-size: 70px; font-weight: 700; margin: 0; line-height: 1; }
    .weather-desc { font-size: 20px; color: var(--muted); text-transform: capitalize; margin-bottom: 20px; }
    .forecast-section { text-align: left; min-width: 0; }
    .rain-alert { background: #eff6ff; color: #1d4ed8; padding: 15px; border-radius: 12px; font-size: 14px; font-weight: 600; margin-bottom: 25px; border: 1px solid #dbeafe; display: none; }
    body.dark-mode .rain-alert { background: #172554; color: #93c5fd; border-color: #1e3a8a; }
    .hourly-scroll { display: flex; gap: 15px; overflow-x: auto; padding-bottom: 15px; margin-bottom: 25px; scroll-behavior: smooth; }
    .hourly-card { min-width: 70px; background: rgba(0,0,0,0.03); padding: 10px; border-radius: 16px; display: flex; flex-direction: column; align-items: center; font-size: 13px; color: var(--ink); }
    body.dark-mode .hourly-card { background: rgba(255,255,255,0.05); }
    .daily-list { display: flex; flex-direction: column; gap: 10px; }
    .daily-row { display: flex; justify-content: space-between; align-items: center; padding: 12px 15px; background: rgba(0,0,0,0.03); border-radius: 16px; font-size: 14px; color: var(--ink); font-weight: 500; }
    body.dark-mode .daily-row { background: rgba(255,255,255,0.05); }
    .save-city-btn { background: #f59e0b; border: none; color: white; padding: 10px 25px; border-radius: 50px; margin-top: 10px; cursor: pointer; font-weight: 700; font-size: 14px; transition: all 0.2s; box-shadow: 0 5px 15px rgba(245, 158, 11, 0.3); }
    .saved-cities-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; margin-top: 25px; }
    .saved-city-card { background: var(--card); border: 1px solid var(--border); padding: 15px 20px; border-radius: 16px; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; display: flex; justify-content: space-between; align-items: center; }
    .saved-city-card:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.05); border-color: #f59e0b; }
    .saved-city-name { font-weight: 600; font-size: 14px; color: var(--ink); }
    .saved-city-temp { font-weight: 700; font-size: 18px; color: #f59e0b; background: rgba(245, 158, 11, 0.1); padding: 2px 8px; border-radius: 8px; }
    .delete-saved-btn { background: transparent; border: none; color: #9ca3af; margin-left: 10px; cursor: pointer; padding: 5px; transition: color 0.2s; }
    .delete-saved-btn:hover { color: #ef4444; }

    /* === BUS BOARD STYLES === */
    .bus-container { background: var(--card); border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); padding: 30px; max-width: 600px; margin: 0 auto; border: 1px solid var(--border); }
    body.dark-mode .bus-container { background: #1e293b; border-color: #334155; }
    .bus-header { text-align: center; margin-bottom: 25px; }
    .bus-input-group { display: flex; gap: 10px; margin-bottom: 20px; }
    .bus-input { flex: 1; padding: 12px; border-radius: 12px; border: 1px solid var(--border); background: rgba(0,0,0,0.03); color: var(--ink); outline: none; }
    .bus-card { display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid var(--border); animation: fadeIn 0.3s ease; }
    .bus-route { font-size: 20px; font-weight: 700; color: #ef4444; width: 60px; }
    .bus-dest { flex: 1; font-weight: 500; color: var(--ink); }
    .bus-time { font-weight: 700; color: #10b981; background: rgba(16, 185, 129, 0.1); padding: 4px 10px; border-radius: 8px; }
    .bus-help-box { background: rgba(99, 102, 241, 0.05); border: 1px solid rgba(99, 102, 241, 0.2); border-radius: 12px; padding: 15px; margin-bottom: 25px; text-align: left; }
    .bus-help-title { color: #6366f1; font-weight: 700; font-size: 14px; margin-bottom: 8px; display:flex; align-items:center; gap:6px;}
    .bus-help-list { margin: 0; padding-left: 20px; font-size: 13px; color: var(--ink); line-height: 1.6; }
    .bus-quick-area { margin-top: 15px; border-top: 1px solid rgba(99, 102, 241, 0.15); padding-top: 10px; }
    .quick-stop-btn { background: var(--card); border: 1px solid var(--border); padding: 6px 12px; border-radius: 8px; font-size: 12px; cursor: pointer; transition: all 0.2s; color: var(--ink); margin-right: 5px; margin-bottom: 5px; }
    .quick-stop-btn:hover { background: #eef2ff; border-color: #6366f1; color: #6366f1; transform: translateY(-2px); }
    body.dark-mode .quick-stop-btn { background: #334155; border-color: #475569; }
  </style>
</head>
<body>

  <div class="header-container">
     <a href="index.html">
        <img src="images/Coursework/Black_logo.PNG" class="logo" alt="Logo">
     </a>
     <div class="navbar">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="Hobbies.html">Hobbies</a></li>
        <li><a href="Video.html">Video</a></li>
        <li><a href="app.html" class="active">Apps</a></li> 
        <li><a href="Clock.html">Clock</a></li>
      </ul>
     </div>
  </div>

  <div class="app-container">
      
      <div id="dashboardView">
          <h1 style="text-align:center; margin-bottom:10px;">My Apps</h1>
          <p style="text-align:center; color:var(--muted); margin-bottom:30px;">Select an app to launch</p>
          
          <div class="app-grid">
              <div class="app-icon icon-sub" onclick="openApp('subManager')"><i class="fa-solid fa-receipt"></i><div class="app-name">Subscriptions</div></div>
              <div class="app-icon icon-clock" onclick="openApp('clockApp')"><i class="fa-solid fa-clock"></i><div class="app-name">Focus & Clock</div></div>
              <div class="app-icon icon-weather" onclick="openApp('weatherApp')"><i class="fa-solid fa-cloud-sun"></i><div class="app-name">Weather</div></div>
              <div class="app-icon icon-bus" onclick="openApp('busApp')"><i class="fa-solid fa-bus"></i><div class="app-name">Bus Board</div></div>
              <div class="app-icon icon-food" onclick="openApp('foodApp')"><i class="fa-solid fa-utensils"></i><div class="app-name">What to Eat</div></div>
              <div class="app-icon icon-qr" onclick="openApp('qrApp')"><i class="fa-solid fa-qrcode"></i><div class="app-name">Link 2 Phone</div></div>
          </div>
      </div>

      <div id="subManager" class="app-view">
          <div class="back-bar"><button class="back-btn" onclick="closeApp()"><i class="fa-solid fa-chevron-left"></i> Back to Apps</button></div>
          <div id="sm">
              <div class="sm-top">
                <div style="text-align: left;">
                  <h1>Subscription Manager</h1>
                  <p class="sm-sub">Track your recurring payments.</p>
                </div>
                <div class="sm-group">
                  <select id="sortOrder" class="sm-select" style="width:auto;"><option value="date">Next Bill Date</option><option value="priceDesc">Price (High to Low)</option><option value="name">Name (A-Z)</option></select>
                  <select id="displayCcy" class="sm-select" style="width:auto;"></select>
                </div>
              </div>
              <div class="sm-card" style="display:flex; gap:20px; justify-content: space-around; text-align: center;">
                <div><div style="font-size:12px; color:var(--muted);">Monthly Total</div><div id="totMonthly" style="font-size:24px; font-weight:700; color:var(--ink);">$0.00</div></div>
                <div><div style="font-size:12px; color:var(--muted);">Yearly Total</div><div id="totYearly" style="font-size:24px; font-weight:700; color:var(--ink);">$0.00</div></div>
              </div>
              <section id="upcomingSection" class="sm-card" style="display:none; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border:none;">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <div style="text-align: left;"><h2 id="upName" style="margin:0; font-size:22px; color:white;">Netflix</h2><div id="upDate" style="font-size:13px; opacity:0.9;">Due on...</div></div>
                    <div style="text-align:right;"><div id="upCost" style="font-size:26px; font-weight:700;">$0</div><div id="upCountdown" style="font-size:12px; background:rgba(255,255,255,0.25); padding:4px 10px; border-radius:20px;">Days</div></div>
                </div>
              </section>
              <section class="sm-card">
                <h3 style="color:var(--ink)">Add Subscription</h3>
                <div class="sm-row">
                  <div class="col-6"><input id="name" class="sm-input" placeholder="Name" /></div>
                  <div class="col-3"><input id="cost" type="number" class="sm-input" placeholder="Price" /></div>
                  <div class="col-3"><select id="currency" class="sm-select"></select></div>
                  <div class="col-6"><select id="cycle" class="sm-select"><option value="monthly">Monthly</option><option value="days30">Every 30 Days</option><option value="yearly">Yearly</option></select></div>
                   <div class="col-6"><input id="startDate" type="date" class="sm-input" /></div>
                </div>
                <button id="addBtn" class="action-btn" style="width:100%; margin-top:15px;">+ Add Subscription</button>
              </section>
              <section class="sm-card"><h3 style="color:var(--ink)">Active Subscriptions (<span id="countActive">0</span>)</h3><div id="activeList"></div></section>
              <div id="editModal" class="modal-overlay"><div class="modal-box"><h2>Edit Subscription</h2><div class="sm-row"><div class="col-12"><input id="editName" class="sm-input" /></div><div class="col-6"><input id="editCost" type="number" class="sm-input" /></div><div class="col-6"><select id="editCurrency" class="sm-select"></select></div><div class="col-6"><select id="editCycle" class="sm-select"><option value="monthly">Monthly</option><option value="yearly">Yearly</option></select></div><div class="col-6"><input id="editDate" type="date" class="sm-input" /></div></div><div style="margin-top:25px; display:flex; gap:10px;"><button onclick="window.closeEditModal()" class="secondary-btn">Cancel</button><button onclick="window.saveEdit()" class="action-btn">Save Changes</button></div></div></div>
          </div>
      </div>

      <div id="clockApp" class="app-view">
           <div class="back-bar"><button class="back-btn" onclick="closeApp()"><i class="fa-solid fa-chevron-left"></i> Back to Apps</button></div>
           <div class="clock-container">
              <div class="digital-time" id="digitalTime">--:--</div>
              <div class="date-display" id="dateDisplay">--/--/----</div>
              <div class="pomo-box" id="pomoBox">
                  <div class="mode-buttons"><button class="mode-btn active" onclick="switchPomoMode('focus')">üçÖ Focus</button><button class="mode-btn" onclick="switchPomoMode('short')">‚òï Break</button></div>
                  <div class="pomo-timer" id="pomoTimer">25:00</div>
                  <div class="pomo-controls"><button class="control-btn btn-start" id="pomoStartBtn" onclick="togglePomo()"><i class="fa-solid fa-play"></i> Start</button><button class="control-btn btn-reset" onclick="resetPomo()"><i class="fa-solid fa-rotate-right"></i></button></div>
              </div>
              <hr style="margin: 30px 0; border:0; border-top:1px solid #eee;">
              <div class="stopwatch-display" id="swDisplay">00:00:00</div>
              <div class="sw-controls"><button class="sw-btn btn-sw-stop" onclick="Stop()">Stop</button><button class="sw-btn btn-sw-start" onclick="Start()">Start</button><button class="sw-btn btn-sw-reset" onclick="Reset()">Reset</button></div>
          </div>
      </div>

      <div id="weatherApp" class="app-view">
           <div class="back-bar"><button class="back-btn" onclick="closeApp()"><i class="fa-solid fa-chevron-left"></i> Back to Apps</button></div>
           <div class="weather-container">
              <div class="search-wrapper"><div class="search-box"><input type="text" id="cityInput" class="weather-input" placeholder="Search city..." onkeyup="handleInput(event)"><button class="weather-btn" onclick="getWeather()"><i class="fa-solid fa-search"></i></button></div><div id="suggestionsList" class="suggestions-list"></div></div>
              <div id="weatherResult" class="weather-content-grid">
                  <div class="current-weather-card"><div id="wIcon" class="weather-icon"><i class="fa-solid fa-cloud"></i></div><h3 id="wCity">London</h3><div id="wTemp" class="weather-temp">15¬∞</div><button class="save-city-btn" onclick="saveCurrentCity()">‚ù§Ô∏è Save City</button></div>
                  <div class="forecast-section"><div id="hourlyScroll" class="hourly-scroll"></div><div id="dailyList" class="daily-list"></div></div>
              </div>
              <div id="savedCitiesList" class="saved-cities-list"></div>
          </div>
      </div>

      <div id="busApp" class="app-view">
          <div class="back-bar"><button class="back-btn" onclick="closeApp()"><i class="fa-solid fa-chevron-left"></i> Back to Apps</button></div>
          <div class="bus-container">
              <div class="bus-help-box">
                  <div class="bus-help-title"><i class="fa-solid fa-circle-info"></i> Quick Stops:</div>
                  <div class="bus-quick-area">
                      <button onclick="setStop('149000006004')" class="quick-stop-btn">Old Steine (D)</button>
                      <button onclick="setStop('149000006097')" class="quick-stop-btn">Station (D)</button>
                  </div>
              </div>
              <div class="bus-input-group">
                  <input type="text" id="busAppId" class="bus-input" placeholder="App ID">
                  <input type="password" id="busAppKey" class="bus-input" placeholder="App Key">
                  <input type="text" id="busStopCode" class="bus-input" placeholder="Stop Code">
              </div>
              <button class="action-btn" onclick="getBusTimes()" style="width:100%;"><i class="fa-solid fa-bus"></i> Get Live Times</button>
              <div id="busResults"></div>
          </div>
      </div>

      <div id="foodApp" class="app-view">
          <div class="back-bar"><button class="back-btn" onclick="closeApp()"><i class="fa-solid fa-chevron-left"></i> Back to Apps</button></div>
          <div class="food-container">
              <h2 style="color:var(--ink);">What to Eat?</h2>
              <div class="food-input-group">
                  <input type="text" id="foodSearch" class="food-input" placeholder="Search (Sushi, Burger, Pizza...)">
                  <button class="action-btn" style="width:auto;" onclick="findFood()">Search</button>
              </div>
              <div class="food-tags">
                  <span class="food-tag" onclick="setFood('Chinese')">Chinese</span>
                  <span class="food-tag" onclick="setFood('Burger')">Burger</span>
                  <span class="food-tag" onclick="setFood('Sushi')">Sushi</span>
                  <span class="food-tag" onclick="setFood('Cafe')">Cafe</span>
                  <span class="food-tag" onclick="setFood('Bubble Tea')">Bubble Tea</span>
              </div>
              <div id="foodMap"></div>
              <div id="foodDetails" class="rest-card">
                  <div class="rest-title" id="rTitle">--</div><div class="rest-meta" id="rCuisine">--</div>
                  <div class="rest-details">
                      <div><span class="rest-label">Hours</span><div id="rHours" class="rest-detail-item">--</div></div>
                      <div><span class="rest-label">Contact</span><div id="rContact" class="rest-detail-item">--</div></div>
                  </div>
                  <a id="rReviewLink" href="#" target="_blank" class="review-link-btn"><i class="fa-brands fa-google"></i> Read Reviews</a>
              </div>
          </div>
      </div>

      <div id="qrApp" class="app-view">
          <div class="back-bar"><button class="back-btn" onclick="closeApp()"><i class="fa-solid fa-chevron-left"></i> Back to Apps</button></div>
          <div class="qr-container">
              <h2>Link to Phone</h2>
              <input type="text" id="qrInput" class="qr-input" placeholder="Paste link or text here..." onkeyup="if(event.key==='Enter') generateQR()">
              
              <div style="display:flex; gap:10px; margin-bottom:20px;">
                  <button class="action-btn" onclick="generateQR()" style="flex:1;">Generate</button>
                  <button class="secondary-btn" onclick="clearQR()" style="width:auto;"><i class="fa-solid fa-trash"></i></button>
              </div>

              <div class="drop-zone" id="dropZone" onclick="document.getElementById('fileInput').click()">
                  <div>
                      <i class="fa-solid fa-cloud-arrow-up"></i>
                      <p>Drop in a photo or Click</p>
                      <small>Max file size: 5MB (JPG, PNG)</small>
                  </div>
                  <input type="file" id="fileInput" hidden accept="image/*">
              </div>

              <div id="qrcode" class="qr-box">
                  <div style="color:var(--muted); font-size:12px;">QR Code will appear here</div>
              </div>
          </div>
      </div>

  </div>

  <button id="backToTop" class="back-to-top" onclick="scrollToTop()"><i class="fa-solid fa-arrow-up"></i></button>

  <script src="Coursework.js"></script>

  <script>
    let map = null; 
    window.openApp = function(appId) {
        document.getElementById('dashboardView').style.display = 'none';
        const app = document.getElementById(appId);
        if(app) { 
            app.style.display = 'block'; 
            window.scrollTo(0, 0); 
            if(appId === 'foodApp' && map) setTimeout(() => map.invalidateSize(), 200);
        }
        if(appId === 'busApp') loadBusCreds();
    };
    window.closeApp = function() {
        document.querySelectorAll('.app-view').forEach(app => app.style.display = 'none');
        document.getElementById('dashboardView').style.display = 'block';
    };
    function scrollToTop() { window.scrollTo({top: 0, behavior: 'smooth'}); }
  </script>

  <script>
    const qrInput = document.getElementById("qrInput");
    const qrOutput = document.getElementById("qrcode");
    const fileInput = document.getElementById("fileInput");
    const dropZone = document.getElementById("dropZone");

    function generateQR(text = null) {
        const val = text || qrInput.value.trim();
        qrOutput.innerHTML = "";
        if (!val) return qrOutput.innerHTML = '<div style="color:var(--muted); font-size:12px;">No text provided</div>';
        new QRCode(qrOutput, { text: val, width: 180, height: 180 });
    }

    function clearQR() {
        qrInput.value = "";
        qrOutput.innerHTML = '<div style="color:var(--muted); font-size:12px;">QR Code will appear here</div>';
    }

    // File Handling
    fileInput.addEventListener("change", (e) => handleFiles(e.target.files));

    dropZone.addEventListener("dragover", (e) => { e.preventDefault(); dropZone.classList.add("drop-zone--over"); });
    ["dragleave", "dragend"].forEach(type => dropZone.addEventListener(type, () => dropZone.classList.remove("drop-zone--over")));
    dropZone.addEventListener("drop", (e) => {
        e.preventDefault();
        dropZone.classList.remove("drop-zone--over");
        if (e.dataTransfer.files.length) handleFiles(e.dataTransfer.files);
    });

    function handleFiles(files) {
        const file = files[0];
        if (file.size > 5000000) return alert("File too big (Max 5MB)");
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = () => {
            qrInput.value = "[IMAGE FILE]";
            generateQR(reader.result);
        };
    }
  </script>

  <script>
    let markers = [];
    const SERVERS = ["https://overpass-api.de/api/interpreter", "https://interpreter.lazurel.openstreetmap.org/api/interpreter"];

    function initMap(lat, lon) {
        if(map) map.remove();
        map = L.map('foodMap').setView([lat, lon], 14);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '&copy; OSM' }).addTo(map);
        L.marker([lat, lon]).addTo(map).bindPopup("üìç You are here").openPopup();
    }

    function setFood(type) { document.getElementById('foodSearch').value = type; findFood(); }

    function findFood() {
        const query = document.getElementById('foodSearch').value;
        if(!query) return;
        navigator.geolocation.getCurrentPosition(pos => {
            initMap(pos.coords.latitude, pos.coords.longitude);
            searchRecursive(pos.coords.latitude, pos.coords.longitude, query, 0);
        }, () => {
            initMap(50.8225, -0.1372);
            searchRecursive(50.8225, -0.1372, query, 0);
        });
    }

    async function searchRecursive(lat, lon, query, idx) {
        if (idx >= SERVERS.length) return alert("Busy servers");
        markers.forEach(m => map.removeLayer(m));
        markers = [];
        const overpassQuery = `[out:json][timeout:25];(nwr["cuisine"~"${query}",i](around:2500,${lat},${lon});nwr["name"~"${query}",i]["amenity"~"restaurant|fast_food|cafe|shop"](around:2500,${lat},${lon}););out center;`;
        try {
            const res = await fetch(SERVERS[idx], { method: "POST", body: overpassQuery });
            const data = await res.json();
            data.elements.forEach(p => {
                const marker = L.marker([p.lat || p.center.lat, p.lon || p.center.lon]).addTo(map);
                marker.on('click', () => showRestaurantDetails(p.tags));
                markers.push(marker);
            });
        } catch (e) { searchRecursive(lat, lon, query, idx + 1); }
    }

    function showRestaurantDetails(tags) {
        document.getElementById('foodDetails').style.display = "block";
        document.getElementById('rTitle').textContent = tags.name || "Unknown";
        document.getElementById('rHours').textContent = tags.opening_hours || "Not listed";
        document.getElementById('rContact').textContent = tags.phone || tags.website || "No info";
        document.getElementById('rReviewLink').href = `https://www.google.com/search?q=${encodeURIComponent(tags.name + " Brighton reviews")}`;
        document.getElementById('foodDetails').scrollIntoView({ behavior: 'smooth' });
    }
  </script>

  <script>
    function loadBusCreds() {
        document.getElementById('busAppId').value = localStorage.getItem('bus_app_id') || '';
        document.getElementById('busAppKey').value = localStorage.getItem('bus_app_key') || '';
    }
    function setStop(code) { document.getElementById('busStopCode').value = code; }
    async function getBusTimes() {
        const id = document.getElementById('busAppId').value;
        const key = document.getElementById('busAppKey').value;
        const stop = document.getElementById('busStopCode').value;
        localStorage.setItem('bus_app_id', id); localStorage.setItem('bus_app_key', key);
        const resDiv = document.getElementById('busResults');
        resDiv.innerHTML = "Loading...";
        try {
            const url = `https://transportapi.com/v3/uk/bus/stop/${stop}/live.json?app_id=${id}&app_key=${key}&group=route&nextbuses=yes`;
            const res = await fetch(url);
            const data = await res.json();
            resDiv.innerHTML = "";
            Object.values(data.departures).flat().slice(0, 8).forEach(bus => {
                const div = document.createElement('div');
                div.className = 'bus-card';
                div.innerHTML = `<div class="bus-route">${bus.line_name}</div><div class="bus-dest">${bus.direction}</div><div class="bus-time">${bus.best_departure_estimate}</div>`;
                resDiv.appendChild(div);
            });
        } catch (e) { resDiv.innerHTML = "Error fetching data."; }
    }
  </script>

  <script>
    function updateClock() {
        const now = new Date();
        document.getElementById('digitalTime').textContent = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', second:'2-digit'});
        document.getElementById('dateDisplay').textContent = now.toLocaleDateString();
    }
    setInterval(updateClock, 1000); updateClock();

    let swTimer = null; let swSec = 0, swMin = 0, swHour = 0;
    window.Start = function() { if(!swTimer) swTimer = setInterval(swUpdate, 1000); };
    window.Stop = function() { clearInterval(swTimer); swTimer = null; };
    window.Reset = function() { Stop(); swSec=0; swMin=0; swHour=0; document.getElementById('swDisplay').textContent = "00:00:00"; };
    function swUpdate() {
        swSec++; if(swSec==60){swSec=0;swMin++} if(swMin==60){swMin=0;swHour++}
        document.getElementById('swDisplay').textContent = `${swHour<10?'0'+swHour:swHour}:${swMin<10?'0'+swMin:swMin}:${swSec<10?'0'+swSec:swSec}`;
    }

    let pomoTime = 25 * 60; let pomoInterval = null; let isRunning = false;
    window.switchPomoMode = function(mode) {
        clearInterval(pomoInterval); isRunning = false;
        pomoTime = (mode === 'focus') ? 25*60 : 5*60;
        document.getElementById('pomoTimer').textContent = (mode === 'focus') ? "25:00" : "05:00";
    };
    window.togglePomo = function() {
        if(isRunning) { clearInterval(pomoInterval); isRunning = false; } 
        else {
            pomoInterval = setInterval(() => {
                pomoTime--; 
                const m = Math.floor(pomoTime / 60); const s = pomoTime % 60;
                document.getElementById('pomoTimer').textContent = `${m < 10 ? '0'+m : m}:${s < 10 ? '0'+s : s}`;
                if(pomoTime <= 0) { clearInterval(pomoInterval); alert("Time is up!"); }
            }, 1000);
            isRunning = true;
        }
    };
    window.resetPomo = function() { clearInterval(pomoInterval); isRunning = false; pomoTime = 25*60; document.getElementById('pomoTimer').textContent = "25:00"; };
  </script>

</body>
</html>
